<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detective Board</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="detective-board">
        <!-- Pins will be added dynamically using JavaScript -->
    </div>

    <div class="strings">
        <!-- Strings will be dynamically added using JavaScript -->
    </div>

    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modal-content"></div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="script.js"></script>
</body>
</html>

<style>

body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
}

.detective-board {
    position: relative;
    background-color: #dcdcdc;
    width: 100%;
    height: 100vh;
    overflow: hidden;
}

.strings {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1; /* Ensure strings are above gray background */
}

.pin {
    position: absolute;
    background-color: #fff;
    padding: 10px;
    border: 1px solid #000;
    cursor: pointer;
    z-index: 2; /* Ensure pins are above strings */
}


.string {
    position: absolute;
    border: 2px solid red;
    z-index: -1;
}

.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4);
}

.modal-content {
    background-color: #fefefe;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-width: 600px;
    position: relative;
}

.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close:hover,
.close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}

</style>

<script>
$(document).ready(function() {
    var pinCount = 10; // Number of pins
    var detectiveBoard = $(".detective-board");
    var stringsContainer = $(".strings");

    // Generate pins and their content
    var pins = [];
    for (var i = 0; i < pinCount; i++) {
        var x = Math.random() * (detectiveBoard.width() - 100); // Adjust 100 to ensure pin stays within board
        var y = Math.random() * (detectiveBoard.height() - 100); // Adjust 100 to ensure pin stays within board

        // Apply slight randomness to pin positions
        x += Math.random() * 50 - 25;
        y += Math.random() * 50 - 25;

        // Generate content for the pin
        var pinContent = {
            title: "Suspect " + (i + 1),
            description: "Description of Suspect " + (i + 1) + "..."
        };

        var pin = $("<div class='pin'></div>").css({
            top: y,
            left: x
        }).html(pinContent.title).attr("data-title", pinContent.title).attr("data-description", pinContent.description);

        detectiveBoard.append(pin);

        pins.push({
            x: x,
            y: y
        });
    }

    // Generate strings connecting pins
    for (var i = 0; i < pinCount; i++) {
        var startPin = pins[i];
        var nearestPinIndex = findNearestPin(i, pins);
        var endPin = pins[nearestPinIndex];

        var startX = startPin.x + $(".pin").width() / 2;
        var startY = startPin.y + $(".pin").height() / 2;
        var endX = endPin.x + $(".pin").width() / 2;
        var endY = endPin.y + $(".pin").height() / 2;

        var string = $("<div class='string'></div>").css({
            top: startY,
            left: startX,
            width: Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2)),
            transform: "rotate(" + Math.atan2(endY - startY, endX - startX) + "rad)"
        });

        stringsContainer.append(string);
    }

    // Show modal with pin content when clicked
    $(".pin").click(function() {
        var pinTitle = $(this).attr("data-title");
        var pinDescription = $(this).attr("data-description");

        var modalContent = "<h2>" + pinTitle + "</h2><p>" + pinDescription + "</p>";
        $("#modal-content").html(modalContent);
        $("#modal").css("display", "block");
    });

    // Close modal when close button is clicked
    $(".close").click(function() {
        $("#modal").css("display", "none");
    });

    // Function to find the index of the nearest pin to a given pin
    function findNearestPin(currentIndex, pins) {
        var nearestIndex = -1;
        var minDistance = Number.MAX_VALUE;

        for (var i = 0; i < pins.length; i++) {
            if (i !== currentIndex) {
                var distance = Math.sqrt(Math.pow(pins[i].x - pins[currentIndex].x, 2) + Math.pow(pins[i].y - pins[currentIndex].y, 2));
                if (distance < minDistance) {
                    minDistance = distance;
                    nearestIndex = i;
                }
            }
        }

        return nearestIndex;
    }
});


</script>
